---
title: "A useFetch hook that makes sense"
description: Streamline data fetching and sync pagination state
tags: [Patterns, Experiments, Hooks]
createdAt: 2024-01-28
---

export const metadata = {
	title: "A useFetch hook that makes sense",
	description: "Streamline data fetching and sync pagination state",
};

# Unlocking React's Potential: Creating a Custom UseFetch Hook

**Welcome to our latest tech blog post!** Today, we're diving into the world of React hooks. Specifically, we'll explore how to create a custom `useFetch` hook. This hook simplifies fetching data from APIs, making your React components cleaner and more efficient.

## Understanding React Hooks

React hooks, introduced in React 16.8, allow you to use state and other React features without writing a class. Hooks are a powerful feature for organizing and reusing logic in your React applications.

### The Basics of useState and useEffect

Before we create our custom hook, let's quickly review two fundamental hooks: `useState` and `useEffect`.

- `useState` allows you to add state to functional components.
- `useEffect` lets you perform side effects in functional components, like fetching data, manipulating the DOM, etc.

## Crafting the UseFetch Hook

Our `useFetch` hook will use `useState` to manage the fetched data and loading state, and `useEffect` to handle the API call.

### The Hook's Structure

Here's a basic structure of our custom hook:

```javascript
import { useState, useEffect } from "react";

export const Previews: React.FC<{
	previewData: PreviewData[],
}> = ({ previewData }) => {
	const allTags = getAllTags(previewData).sort();
	const [includedTags, setIncludedTags] = useState(allTags);
	const [sortKey, setSortKey] = useState(SortKey.Desc);

	// Memoize previews to avoid unnecessary re-renders
	const previews = useMemo(() => {
		const filteredPreviews = filterIncludedTags(previewData, includedTags);
		const sortedPreviews = sortPreviewsByDate(filteredPreviews, sortKey);
		return sortedPreviews;
	}, [previewData, includedTags, sortKey]);

	const toggleIncludedTag = (tag: string) => {
		if (includedTags.includes(tag)) {
			setIncludedTags(
				includedTags.filter((includedTag) => includedTag !== tag)
			);
		} else {
			setIncludedTags([...includedTags, tag]);
		}
	};

	const resetIncludedTags = () => {
		setIncludedTags(allTags);
	};

	const toggleSortKey = () => {
		setSortKey(sortKey === SortKey.Asc ? SortKey.Desc : SortKey.Asc);
	};

	return (
		<>
			<SearchBar
				tags={allTags}
				includedTags={includedTags}
				toggleIncludedTag={toggleIncludedTag}
				resetIncludedTags={resetIncludedTags}
				sortKey={sortKey}
				toggleSortKey={toggleSortKey}
			/>
			<PreviewGrid previews={previews} />
		</>
	);
};
```
